% !TeX root = main.tex

\def\mybegintcolorbox{\begin{tcolorbox}}
\newenvironment{syntax}{%
	\expandafter\mybegintcolorbox\expandafter[\mytcboptions,%
		colback=black!5!white,%
		colframe=black,%
		left=0pt,%
		right=0pt,%
	]%
		\begin{tabular}{r@{\hspace*{0.2cm}}c@{\hspace*{0.2cm}}l}%
			\def\syntaxfirstrow{y}%
}{%
		\end{tabular}%
	\end{tcolorbox}%
}

\newcommand{\token}[1]{%
	\tcbox[%
		on line,%
		size=small,%
		boxsep=0pt,%
		boxrule=0.2mm,%
		enlarge top by=0.5mm,%
		enlarge bottom by=0.5mm,%
		enlarge left by=0.7mm,%
		enlarge right by=0.7mm,%
		colback=black!20!white,%
		colframe=black,%
	]{\strut\texttt{#1}}%
}
\newcommand{\nonterminal}[1]{\texttt{#1}}
\newcommand{\alternative}{~$\big|$~~}
\newcommand{\optionstart}{~$\big[$~~}
\newcommand{\optionend}{~$\big]$~~}
\newcommand{\groupstart}{$\big($~}
\newcommand{\groupend}{~$\big)$}
\newcommand{\groupendstar}{~$\big)^*$}

\newcommand{\syntaxrule}[2]{%
	\ifdefined\syntaxfirstrow\let\syntaxfirstrow\undefined\else\\[4mm]\fi%
	\nonterminal{#1} & $::=$ & #2%
}
\newcommand{\syntaxcontinue}[1]{%
	\\%
	& & #1%
}
\newcommand{\syntaxalternative}[1]{%
	\\%
	& \alternative &  #1%
}
\newcommand{\syntaxcondition}[1]{%
	\hspace{5mm}\small{(where #1)}%
}
